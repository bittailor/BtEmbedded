 <% for source in sources %>
build <%= source.pathmap("%{^source,#{target_folder}}X.obj") %>: cxx <%= source %>
   includes = <%= includes.collect{|i| "-I"+i}.join(" ")  %> $includes	
<% end %>

build <%= "#{target_folder}/#{name}" %>  : link <%= sources.pathmap("%{^source,#{target_folder}}X.obj").join(' ') %> 
   libs = <%= @libraries.collect{|l| "-l"+l}.join(" ") %>
